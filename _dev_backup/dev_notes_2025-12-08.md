# ê°œë°œ ë…¸íŠ¸ - 2025ë…„ 12ì›” 8ì¼

## ğŸ“‹ ëª©ì°¨
1. [NER ëª¨ë¸ ê°œì„  ë° í•™ìŠµ](#1-ner-ëª¨ë¸-ê°œì„ -ë°-í•™ìŠµ)
2. [ëª¨ë¸ ì„±ëŠ¥ í‰ê°€ (KPI)](#2-ëª¨ë¸-ì„±ëŠ¥-í‰ê°€-kpi)
3. [main.py í†µí•© ë° ìµœì í™”](#3-mainpy-í†µí•©-ë°-ìµœì í™”)
4. [í•˜ì´ë¸Œë¦¬ë“œ ë‹¤ì¤‘ ì¼ì • ì²˜ë¦¬](#4-í•˜ì´ë¸Œë¦¬ë“œ-ë‹¤ì¤‘-ì¼ì •-ì²˜ë¦¬)
5. [í’ˆì§ˆ í–¥ìƒ ë²„íŠ¼ ì¶”ê°€](#5-í’ˆì§ˆ-í–¥ìƒ-ë²„íŠ¼-ì¶”ê°€)
6. [í”„ë¡œì íŠ¸ ì •ë¦¬ ë° ë°°í¬](#6-í”„ë¡œì íŠ¸-ì •ë¦¬-ë°-ë°°í¬)

---

## 1. NER ëª¨ë¸ ê°œì„  ë° í•™ìŠµ

### 1.1 ë°ì´í„° ì¤€ë¹„
- **ë°ì´í„° í†µí•©**: 3ê°œ ë°ì´í„°ì…‹ ë³‘í•©
  - `synthetic_training_data.json` (ê¸°ì¡´ í•©ì„± ë°ì´í„°)
  - `new_ai_data.json` (ChatGPT ìƒì„± ë°ì´í„°)
  - `ai_test_data_yelim.json` (ì¶”ê°€ í…ŒìŠ¤íŠ¸ ë°ì´í„° 100ê°œ)
  - **ì´ 10,248ê°œ** ìƒ˜í”Œ

- **ë°ì´í„° ë¶„í• ** (70/15/15):
  - `train_data.json`: 7,173ê°œ (í•™ìŠµìš©)
  - `dev_data.json`: 1,537ê°œ (ê²€ì¦ìš©)
  - `test_data.json`: 1,538ê°œ (KPI í‰ê°€ìš©)

### 1.2 í•™ìŠµ ìŠ¤í¬ë¦½íŠ¸ ê°œì„  (`train_improved.py`)
- **6ê°œ ì—”í‹°í‹° ë¼ë²¨**ë¡œ í™•ì¥:
  - `START_DATE`, `START_TIME`
  - `END_DATE`, `END_TIME` (ì‹ ê·œ)
  - `LOC`, `EVENT_TITLE`

- **ë² ì´ìŠ¤ ëª¨ë¸**: `en_core_web_lg` (transfer learning)
- **í•™ìŠµ íŒŒë¼ë¯¸í„°**: 
  - Epochs: 30
  - Dropout: 0.35
- **ì¶œë ¥ ê²½ë¡œ**: `./output/new_ner_model`

### 1.3 ì£¼ìš” ì´ìŠˆ í•´ê²°
- `AttributeError: 'int' object has no attribute 'strip'`
  - ì›ì¸: JSON ë°ì´í„°ì— ì •ìˆ˜í˜• ì—”í‹°í‹° ê°’ ì¡´ì¬
  - í•´ê²°: `str()` ë³€í™˜ ì¶”ê°€

---

## 2. ëª¨ë¸ ì„±ëŠ¥ í‰ê°€ (KPI)

### 2.1 í‰ê°€ ìŠ¤í¬ë¦½íŠ¸ (`evaluate_kpi.py`, `benchmark_compare.py`)
- test_data.json ê¸°ë°˜ í‰ê°€
- Precision, Recall, F1-score ê³„ì‚°

### 2.2 ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ (Custom vs Baseline)

| Entity       | Custom Model F1 | Baseline F1 | í–¥ìƒ    |
|--------------|-----------------|-------------|---------|
| START_DATE   | 81.2%           | 39.0%       | +42.2%  |
| START_TIME   | 78.8%           | 19.5%       | +59.3%  |
| END_DATE     | 100.0%          | 0.0%        | +100.0% |
| END_TIME     | 99.4%           | 0.0%        | +99.4%  |
| LOC          | 91.2%           | 2.6%        | +88.6%  |
| EVENT_TITLE  | 95.3%           | 3.2%        | +92.1%  |
| **OVERALL**  | **88.0%**       | 19.0%       | **+69.1%** |

> ğŸ‰ ì»¤ìŠ¤í…€ ëª¨ë¸ì´ baseline ëŒ€ë¹„ **+69.1%** í–¥ìƒ!

---

## 3. main.py í†µí•© ë° ìµœì í™”

### 3.1 ëª¨ë¸ ë¡œë”© ë³€ê²½
```python
# Before
NER_MODEL_NAME = "en_core_web_md"

# After  
CUSTOM_NER_MODEL_PATH = "./output/new_ner_model"
FALLBACK_NER_MODEL = "en_core_web_md"  # í´ë°±
```

### 3.2 6ê°œ ë¼ë²¨ ì¶”ì¶œ ì§€ì›
```python
# ìƒˆë¡œìš´ ì—”í‹°í‹° ì¶”ì¶œ
start_dates = [ent.text for ent in doc.ents if ent.label_ == "START_DATE"]
start_times = [ent.text for ent in doc.ents if ent.label_ == "START_TIME"]
end_dates = [ent.text for ent in doc.ents if ent.label_ == "END_DATE"]
end_times = [ent.text for ent in doc.ents if ent.label_ == "END_TIME"]
locs = [ent.text for ent in doc.ents if ent.label_ in ["LOC", "GPE"]]
events = [ent.text for ent in doc.ents if ent.label_ in ["EVENT_TITLE", "EVENT"]]
```

### 3.3 Gemini í˜¸ì¶œ ìµœì í™”
- **ë¬¸ì œ**: `" to "` íŒ¨í„´ì´ ìˆìœ¼ë©´ ë¶ˆí•„ìš”í•˜ê²Œ Gemini í˜¸ì¶œ
- **í•´ê²°**: END_TIMEì´ ì´ë¯¸ ì¶”ì¶œëìœ¼ë©´ Gemini ìƒëµ
```python
needs_gemini = is_ocr or not date_str or not time_str
if " to " in translated_text and not end_time_str:
    needs_gemini = True
```

---

## 4. í•˜ì´ë¸Œë¦¬ë“œ ë‹¤ì¤‘ ì¼ì • ì²˜ë¦¬

### 4.1 ë¬¸ì œì 
- ê¸°ì¡´: ì—¬ëŸ¬ ì¼ì • ê°ì§€ ì‹œ ë¬´ì¡°ê±´ Gemini í˜¸ì¶œ (ëŠë¦¼)
- "10 AM to 4 PM" ê°™ì€ ì‹œê°„ ë²”ìœ„ë„ "ë‹¤ì¤‘ ì¼ì •"ìœ¼ë¡œ ì˜¤ì¸

### 4.2 ê°œì„ ëœ ë¡œì§
1. **ì‹œê°„ ë²”ìœ„ ê°ì§€**: `" to "`, `" - "`, `~`, `ë¶€í„°` íŒ¨í„´
2. **spaCy ìš°ì„  ì²˜ë¦¬**: ë¬¸ì¥ë³„ ì—”í‹°í‹° ì¶”ì¶œ
3. **í’ˆì§ˆ ì ìˆ˜ ê³„ì‚°**: 50% ë¯¸ë§Œì´ë©´ Gemini í´ë°±

```python
def extract_multiple_schedules_with_spacy(text, nlp_model):
    # ë¬¸ì¥ ë¶„ë¦¬ â†’ ê° ë¬¸ì¥ì—ì„œ ì—”í‹°í‹° ì¶”ì¶œ
    # í’ˆì§ˆ ì ìˆ˜ ê³„ì‚° í›„ ë°˜í™˜ or Gemini í´ë°±
```

### 4.3 ìŠ¤ë§ˆíŠ¸ ì œëª© ì¶”ì¶œ (`_extract_smart_summary`)
- ì´ë²¤íŠ¸ í‚¤ì›Œë“œ ê°ì§€: `meeting`, `presentation`, `deadline` ë“±
- ë¶ˆí•„ìš”í•œ ì‹œì‘ì–´ ìŠ¤í‚µ: `the`, `our`, `we` ë“±

### 4.4 í’ˆì§ˆ ì ìˆ˜ ê¸°ì¤€ (`_calculate_quality_score`)
- ë‚ ì§œ/ì‹œê°„ ìœ ë¬´: +30%
- ì˜ë¯¸ìˆëŠ” ì œëª©: +30%
- ì¥ì†Œ ìœ ë¬´: +20%
- ë‚ ì§œ+ì‹œê°„ ëª¨ë‘: +20%
- **50% ë¯¸ë§Œ â†’ Gemini í´ë°±**

---

## 5. í’ˆì§ˆ í–¥ìƒ ë²„íŠ¼ ì¶”ê°€

### 5.1 Backend (`/reanalyze-gemini`)
```python
@app.post("/reanalyze-gemini", response_model=ExtractResponse)
async def api_reanalyze_with_gemini(request: ReanalyzeRequest):
    """Force re-analysis using Gemini for better quality"""
    # Geminië¡œ ê°•ì œ ì¬ë¶„ì„
```

### 5.2 Frontend (âœ¨ Enhance ë²„íŠ¼)
- ìœ„ì¹˜: Details ì„¹ì…˜ ìš°ì¸¡ ìƒë‹¨
- ê¸°ëŠ¥: ì‚¬ìš©ìê°€ ê²°ê³¼ê°€ ì´ìƒí•  ë•Œ ìˆ˜ë™ìœ¼ë¡œ Gemini ì¬ë¶„ì„ ìš”ì²­
- ìƒíƒœ: ë¡œë”©/ì„±ê³µ/ì‹¤íŒ¨ í”¼ë“œë°± ì œê³µ

```javascript
async function enhanceQuality() {
    const response = await fetch('/reanalyze-gemini', {...});
    // UI ì—…ë°ì´íŠ¸
}
```

---

## 6. í”„ë¡œì íŠ¸ ì •ë¦¬ ë° ë°°í¬

### 6.1 íŒŒì¼ ì •ë¦¬
- **ë°°í¬ìš© íŒŒì¼** (ë£¨íŠ¸ ìœ ì§€):
  - `main.py`, `pattern_matcher.py`
  - `requirements.txt`, `Dockerfile`
  - `static/`, `output/`

- **ê°œë°œìš© íŒŒì¼** (`_dev_backup/`ë¡œ ì´ë™):
  - í•™ìŠµ ìŠ¤í¬ë¦½íŠ¸ 6ê°œ
  - í•™ìŠµ ë°ì´í„° 7ê°œ (~16MB)
  - ë²¤ì¹˜ë§ˆí¬/KPI ê²°ê³¼
  - ê°œë°œ ë…¸íŠ¸/ê³„íš ë¬¸ì„œ
  - ì´ 58ê°œ íŒŒì¼

### 6.2 Git ì„¤ì •
- `.gitignore`ì— `_dev_backup/` ì¶”ê°€
- Git LFS ì„¤ì • (`output/**/*` íŠ¸ë˜í‚¹)

### 6.3 ë°°í¬
- GitHub í‘¸ì‹œ ì™„ë£Œ
- Hugging Face Spaces í‘¸ì‹œ ì™„ë£Œ
  ```bash
  git remote add hf https://huggingface.co/spaces/snowmang/AI_Scheduler_G14
  git push hf master:main --force
  ```

---

## ğŸ“Š ì„±ê³¼ ìš”ì•½

| í•­ëª© | Before | After |
|------|--------|-------|
| NER ì •í™•ë„ (F1) | 19.0% | **88.0%** |
| ì§€ì› ì—”í‹°í‹° | 4ê°œ | **6ê°œ** (END ì¶”ê°€) |
| Gemini í˜¸ì¶œ | í•­ìƒ | í•„ìš”ì‹œë§Œ (ìµœì í™”) |
| ë‹¤ì¤‘ ì¼ì • ì²˜ë¦¬ | Gemini only | **Hybrid** (spaCy ìš°ì„ ) |
| ì‚¬ìš©ì í”¼ë“œë°± | ì—†ìŒ | **âœ¨ Enhance ë²„íŠ¼** |

---

## ğŸ› í•´ê²°ëœ ì´ìŠˆ

1. **spaCy ë²„ì „ ê²½ê³ **: `en_core_web_lg` 3.8.0 vs spaCy 3.7.5 (ë¬´ì‹œ ê°€ëŠ¥)
2. **ì •ìˆ˜í˜• ì—”í‹°í‹° ì˜¤ë¥˜**: `str()` ë³€í™˜ìœ¼ë¡œ í•´ê²°
3. **ë¶ˆí•„ìš”í•œ Gemini í˜¸ì¶œ**: ì¡°ê±´ ìµœì í™”ë¡œ í•´ê²°
4. **Git í‘¸ì‹œ ì‹¤íŒ¨ (408)**: Git LFSë¡œ ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬
5. **Hugging Face ë¯¸ë°˜ì˜**: ë³„ë„ remote í‘¸ì‹œë¡œ í•´ê²°

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„ (ì„ íƒì )

1. [ ] spaCy 3.8.0ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ (ê²½ê³  ì œê±°)
2. [ ] ë” ë§ì€ í•™ìŠµ ë°ì´í„° ìˆ˜ì§‘
3. [ ] ë°˜ë³µ ì¼ì • ì²˜ë¦¬ ê°œì„  ("every Wednesday")
4. [ ] í•œêµ­ì–´ ì „ìš© NER ëª¨ë¸ í•™ìŠµ ê³ ë ¤

---

*ì‘ì„±ì¼: 2025-12-08*
*ì‘ì„±ì: AI Smart Scheduler ê°œë°œíŒ€*
